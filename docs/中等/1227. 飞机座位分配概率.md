---
title: 1227. é£æœºåº§ä½åˆ†é…æ¦‚ç‡
---

## é¢˜ç›®æè¿°

æœ‰ `n` ä½ä¹˜å®¢å³å°†ç™»æœºï¼Œé£æœºæ­£å¥½æœ‰ `n` ä¸ªåº§ä½ã€‚ç¬¬ä¸€ä½ä¹˜å®¢çš„ç¥¨ä¸¢äº†ï¼Œä»–éšä¾¿é€‰äº†ä¸€ä¸ªåº§ä½åä¸‹ã€‚

å‰©ä¸‹çš„ä¹˜å®¢å°†ä¼šï¼š

å¦‚æœä»–ä»¬è‡ªå·±çš„åº§ä½è¿˜ç©ºç€ï¼Œå°±ååˆ°è‡ªå·±çš„åº§ä½ä¸Šï¼Œ

- å½“ä»–ä»¬è‡ªå·±çš„åº§ä½è¢«å ç”¨æ—¶ï¼Œéšæœºé€‰æ‹©å…¶ä»–åº§ä½
- ç¬¬ `n`Â  ä½ä¹˜å®¢ååœ¨è‡ªå·±çš„åº§ä½ä¸Šçš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼Ÿ

**ç¤ºä¾‹ 1ï¼š**

> **è¾“å…¥ï¼š** n = 1  
> **è¾“å‡ºï¼š** 1.00000  
> **è§£é‡Šï¼š** ç¬¬ä¸€ä¸ªäººåªä¼šååœ¨è‡ªå·±çš„ä½ç½®ä¸Šã€‚

**ç¤ºä¾‹ 2ï¼š**

> **è¾“å…¥ï¼š** n = 2  
> **è¾“å‡ºï¼š** 0.50000  
> **è§£é‡Šï¼š** åœ¨ç¬¬ä¸€ä¸ªäººé€‰å¥½åº§ä½åä¸‹åï¼Œç¬¬äºŒä¸ªäººååœ¨è‡ªå·±çš„åº§ä½ä¸Šçš„æ¦‚ç‡æ˜¯ 0.5ã€‚

**æç¤ºï¼š**

- `1 <= n <= 10^5`

æ¥æºï¼š[LeetCode](https://leetcode-cn.com/problems/airplane-seat-assignment-probability)

## æ€è·¯

è¿™é¢˜æœ‰ç‚¹æ„æ€ï¼Œæˆ‘è§£å†³çš„è¿‡ç¨‹ä¹Ÿæ˜¯ä¸€æ³¢ä¸‰æŠ˜ã€‚ ğŸ˜ˆ

#### é€’å½’

é¦–å…ˆæ˜¯æˆ‘æ˜¯æ¨å¯¼å‡ºä¸€ä¸ª`é€’å½’`çš„è§£æ³•ã€‚  
ä¸ºäº†æ–¹ä¾¿æè¿°ï¼Œæˆ‘ä»¬è®¾`f = nthPersonGetsNthSeat`ã€‚  
ä»ç¬¬ä¸€ä¸ªäººå¼€å§‹çœ‹ï¼Œå‡å¦‚ä»–ååœ¨äº†è‡ªå·±çš„ä½ç½®ä¸Šï¼Œåˆ™åé¢çš„äººä¼šä¾æ¬¡ååœ¨è‡ªå·±çš„ä½ç½®ä¸Šï¼ŒåŒ…æ‹¬ nã€‚è¿™ä¸ªæ¦‚ç‡æ˜¯ 1/nã€‚  
å‡å…¥ä»–ååœ¨äº† n çš„ä½ç½®ï¼Œé‚£æ— è®ºåé¢äººæ€ä¹ˆåï¼Œn éƒ½ä¸å¯èƒ½ååœ¨è‡ªå·±çš„ä½ç½®ä¸Šï¼Œè¿™ä¸ªæ¦‚ç‡ä¹Ÿæ˜¯ 1/nã€‚  
å†çœ‹å…¶ä»–æƒ…å†µï¼Œå‡å¦‚ä»–ååœ¨äº† 2 å·ä½ï¼Œåˆ™ 2 å·åªèƒ½éšæœºæŒ‘åˆ«çš„ï¼Œè‹¥ 2 å·æ°å¥½ååœ¨äº† 1 å·ä½ï¼Œåˆ™åé¢çš„äººåˆå¯ä»¥ä¾æ¬¡ååœ¨è‡ªå·±çš„ä½ç½®ä¸Šã€‚æ˜¯ä¸æ˜¯å’Œåˆšæ‰çš„æƒ…å†µå¾ˆåƒï¼Ÿ  
å¯¹äº†ï¼Œè¿™å°±è½¬åŒ–æˆäº†ç¬¬`n-1`çš„é—®é¢˜ã€‚è¿™ç§æƒ…å†µ n èƒ½åå¯¹çš„æ¦‚ç‡æ˜¯`1/n * f(n - 1)`
å‡å¦‚ 1 ååœ¨äº† 3ã€4ã€5ã€6ã€...ã€k çš„ä½ç½®ï¼Œåˆ™ 2 åˆ° k-1 ä¼šä¾æ¬¡ååœ¨è‡ªå·±çš„ä½ç½®ï¼Œå‰©ä¸‹çš„é—®é¢˜åˆè½¬åŒ–ä¸º`f(n - k)`ï¼Œæ­¤æ—¶ n èƒ½åå¯¹çš„æ¦‚ç‡æ˜¯`1/n * f(n - k)`  
äºæ˜¯å¯å¾—`é€’å½’`çš„è§£æ³•ï¼Œ`f(n) = (f(1) + f(2) + ... + f(n-1))/n`ã€‚ä¸ºäº†é¿å…å¤§é‡é‡å¤çš„è®¡ç®—ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ª`map`å°†`f(n)`çš„ç»“æœå­˜å‚¨èµ·æ¥ã€‚

æµ‹è¯•çš„æ—¶å€™å‘ç°ï¼Œå¾ˆå¤šç”¨ä¾‹å¾—åˆ°çš„ç»“æœéƒ½æ˜¯`0.5`ï¼Œæ„Ÿè§‰æœ‰ç‚¹å¥‡æ€ªï¼Œä½†è¿˜æ˜¯å…ˆ*æäº¤*è¯•è¯•ã€‚

å¾ˆä¸å¹¸ï¼Œæµ‹è¯•`n=100000`çš„æ—¶å€™ï¼Œå †æ ˆæº¢å‡ºäº†ã€‚

#### æ•°å­¦

çœ‹æ¥è¿˜æ˜¯å¾—æ¢ç©¶ä¸€ä¸‹ä¸ºä»€ä¹ˆå…¨æ˜¯ 0.5 çš„åŸå› äº†ã€‚

å…¶å®å¯ä»¥é€šè¿‡**æ•°å­¦å½’çº³æ³•**ï¼Œè¯æ˜å½“ n å¤§äº 1 æ—¶ï¼Œè‹¥ f(n-1)ä¸º 0.5ï¼Œåˆ™ f(n)ä¸º 0.5ã€‚æ¼”ç®—è¿‡ç¨‹ä¸åœ¨æ­¤èµ˜è¿°äº†ã€‚

## è§£æ³•

#### é€’å½’æ–¹æ³•

```js
const map = { 1: 1 };

/**
 * @param {number} n
 * @return {number}
 */
const nthPersonGetsNthSeat = n => {
  if (map[n]) return map[n];

  let accumulate = 0;

  for (let k = 1; k <= n - 1; k++) {
    accumulate += nthPersonGetsNthSeat(k);
  }

  const result = accumulate / n;

  map[n] = result;

  return result;
};
```

#### æ•°å­¦æ–¹æ³•

```js
/**
 * @param {number} n
 * @return {number}
 */
const nthPersonGetsNthSeat = n => {
  return n === 1 ? 1 : 0.5;
};
```
